# ëª¨ë…¸ë ˆí¬
í”„ë¡œì íŠ¸ë³„ë¡œ ë ˆí¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•˜ì—¬ ë§Œë“œëŠ” ë©€í‹°ë ˆí¬(ë˜ëŠ” í´ë¦¬ë ˆí¬)ì™€ ë°˜ëŒ€ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ, ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì—ì„œ ë‘ ê°œ ì´ìƒì˜ í”„ë¡œì íŠ¸ ì½”ë“œê°€ ë™ì¼í•œ ì €ì¥ì†Œì— ì €ì¥ë˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì „ëµ

![](images/monorepo.jpeg)

## ì¥ì 
- ì—¬ëŸ¬ í”„ë¡œì íŠ¸ ê°„ì˜ ì½”ë“œì˜ ê³µìœ ì™€ ì¬ì‚¬ìš©ì´ ì‰½ë‹¤ (ì¤‘ë³µì½”ë“œ ê°ì†Œ)
- NPM ë°°í¬ ì—†ì´ í”„ë¡œì íŠ¸ ê°„ì— ì½”ë“œ ê³µìœ ê°€ ê°€ëŠ¥
- ë™ì¼í•œ lint, prettier, tsconfig ë“±ì˜ ì„¤ì •ì„ ê³µìœ í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆìŒ
- ë‚´ê°€ ë‹´ë‹¹í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë”ë¼ë„ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì£¼ê±°ë‚˜ ìˆ˜ì •ì„ í•  ìˆ˜ ìˆë‹¤
- í†µì¼í™”ëœ ê°œë°œí™˜ê²½ìœ¼ë¡œ ì—”ì§€ë‹ˆì–´ë“¤ì˜ í”„ë¡œì íŠ¸ ì´ë™ì‹œ ì ì‘ì‹œê°„ ê°ì†Œ


## ë‹¨ì 
- ê¸´ ì´ˆê¸° í”„ë¡œì íŠ¸ ì„¤ì •ì‹œê°„
- í”„ë¡œì íŠ¸ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ í•¨ê»˜ ë¹Œë“œí•´ì•¼ í•˜ë¯€ë¡œ ë¹Œë“œì‹œê°„ì´ ì¦ê°€í•  ìˆ˜ ìˆë‹¤. (Turborepo ê°™ì€ ì¶”ê°€ë„êµ¬ë¥¼ ì ì§„ì ìœ¼ë¡œ ì ìš©í•˜ì—¬ ìºì‹±ì „ëµì„ ì‚¬ìš©í•˜ì—¬ ê°œì„ )
- í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ì—ì„œ ë°œìƒí•œ ë³€ê²½ ì‚¬í•­ì´ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤
- ì—¬ëŸ¬ í”„ë¡œì íŠ¸ê°€ í•˜ë‚˜ì˜ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê°œë°œì´ë‚˜ ë°°í¬ì— ë³‘ëª©í˜„ìƒì„ ì£¼ì§€ ì•Šìœ¼ë ¤ë©´ íŒ€ êµ¬ì„±ì›ê³¼ ì˜ë…¼í•˜ì—¬ ì ì ˆí•œ ë¸Œëœì¹˜ ì „ëµì„ ì„¸ìš¸ í•„ìš”ê°€ ìˆìŒ

## ëª¨ë…¸ë ˆí¬ êµ¬ì„±ì„ ë„ì™€ì£¼ëŠ” ë„êµ¬
í¬ê²Œ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•œ êµ¬ì„±ë°©ì‹ê³¼ (npm, yarn, pnpm) 
ëª¨ë…¸ë ˆí¬ ë¹Œë“œ ì‹œìŠ¤í…œ ë„êµ¬ë¥¼ ê°™ì´ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±í•˜ëŠ” ë°©ì‹ (lerna, nx, Turborepo, rush ë“±) ë‘ê°€ì§€ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.

## Yarn Workspaces
Yarn WorkspacesëŠ” í•˜ë‚˜ì˜ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë“¤ì„ í¸ë¦¬í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë©° ìµœìƒë‹¨ì˜ package.jsonì— workspacesë¥¼ ì •ì˜í•˜ê³  yarn installì„ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ìµœìƒë‹¨ì˜ íŒ¨í‚¤ì§€, ê·¸ë¦¬ê³  workspacesì— ì •ì˜ëœ íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. ë˜í•œ íŒ¨í‚¤ì§€ê°€ ì¤‘ë³µë˜ëŠ” ê²½ìš° í˜¸ì´ìŠ¤íŒ…ì„ í†µí•´ ìµœìƒìœ„ì— ì„¤ì¹˜í•˜ì—¬ ì¤‘ë³µ ì„¤ì¹˜ë¥¼ ë°©ì§€(pnp)
### [ğŸ“Â Code](https://github.com/dkd051/yarn-berry-workspace/blob/main/README.md)

```bash
npm install -g yarn # yarn ì„¤ì¹˜

mkdir yarn-berry-test # í”„ë¡œì íŠ¸ í´ë” ìƒì„±

cd yarn-berry-test

yarn set version berry # ëª¨ë…¸ë ˆí¬ë¥¼ ì‚¬ìš©í•  í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ í´ë”ì—ì„œ í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ yarn 2+ ë²„ì „ ì´ìƒ ì„¤ì¹˜

yarn init -w # packages ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸° / ë£¨íŠ¸ ì´ˆê¸°í™”
```


```json5
// package.json
{
  "name": "yarn-berry-workspace",
  // ...
  "workspaces": [
    "apps/*", // yarn ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ê´€ë¦¬í•  íŒ¨í‚¤ì§€ í´ë”ë¥¼ ì¶”ê°€
    "packages/*"
  ],
  // ...
}
```

```bash
yarn init # yarn init ëª…ë ¹ì–´ë¥¼ í†µí•´ appsì™€ packages í•˜ìœ„í´ë” í”„ë¡œì íŠ¸ì—ì„œ package.json ìƒì„±
```
```bash
â”œâ”€â”€ apps
â”‚Â Â  â””â”€â”€ koo  # @koo/web (package.json name)
â”‚Â Â      â”œâ”€â”€ README.md
â”‚Â Â      â”œâ”€â”€ next-env.d.ts
â”‚Â Â      â”œâ”€â”€ next.config.js
â”‚Â Â      â”œâ”€â”€ package.json
â”‚Â Â      â”œâ”€â”€ public
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ favicon.ico
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ next.svg
â”‚Â Â      â”‚Â Â  â””â”€â”€ vercel.svg
â”‚Â Â      â”œâ”€â”€ src
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ pages
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ _app.tsx
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ _document.tsx
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ api
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ hello.ts
â”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
â”‚Â Â      â”‚Â Â  â””â”€â”€ styles
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ Home.module.css
â”‚Â Â      â”‚Â Â      â””â”€â”€ globals.css
â”‚Â Â      â””â”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â”œâ”€â”€ packages
â”‚Â Â  â”œâ”€â”€ lib  # @koo/lib (package.json name)
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ README.md
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ package.json
â”‚Â Â  â”‚Â Â  â””â”€â”€ tsconfig.json
â”‚Â Â  â””â”€â”€ ui # @koo/ui (package.json name)
â”‚Â Â      â”œâ”€â”€ README.md
â”‚Â Â      â”œâ”€â”€ package.json 
â”‚Â Â      â”œâ”€â”€ src
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Button.tsx
â”‚Â Â      â”‚Â Â  â””â”€â”€ index.ts
â”‚Â Â      â””â”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.base.json
â””â”€â”€ yarn.lock
```

```bash
yarn # root í´ë”ì—ì„œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ í›„ appsì™€ packagesì˜ package.json íŒŒì¼ì„ ì½ì€ í›„ .pnp.cjs ìˆ¨ê¹€ íŒŒì¼ì„ ê°±ì‹ í•˜ì—¬ ì´í›„ yarnì—ì„œ ë‹¤ì¤‘ íŒ¨í‚¤ì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œë¨
```
```bash
yarn workspace @koo/web add @koo/lib # @koo/web í”„ë¡œì íŠ¸ì— @koo/lib ì˜ì¡´ì„±ì„ ì¶”ê°€. -> lib ë‚´ ì •ì˜í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë¨

yarn workspace @koo/web add @koo/ui # @koo/web í”„ë¡œì íŠ¸ì— @koo/ui ì˜ì¡´ì„±ì„ ì¶”ê°€. -> uiì— ì •ì˜í•œ Button ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë¨
```
```json5
// apps/koo/package.json
// @koo/libì™€ @koo/ui ì˜ì¡´ì„±ì´ ì¶”ê°€ë¨
{
  //...
  "dependencies": {
    "@koo/lib": "workspace:^",
    "@koo/ui": "workspace:^",
    "next": "13.5.6",
    "react": "^18",
    "react-dom": "^18"
  },
  //...
}

```


# Reference
[ëª¨ë…¸ë ˆí¬ vs ë©€í‹°ë ˆí¬](https://velog.io/@miso1489/%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%99%80-%EB%A9%80%ED%8B%B0%EB%A0%88%ED%8F%AC)

[[ETC] Monorepo - ê°œë…](https://beomy.github.io/tech/etc/monorepo-concept/)